import{_ as Ct,R as xt,k as Ot,d as Bt,e as Dt,f as K,g as at,m as lt,u as Y}from"../chunks/firebase.68c14ee1.js";import{H as Nt}from"../chunks/control.f5b05b5f.js";import{w as x,B as Tt,C as Mt,s as tt,D as ct,e as ut,n as qt,g as P,h as R,z as At,k as j,i as O,c as D,d as N,A as ft,E as dt,u as Ht,p as It,q as Gt,F as zt,l as G,m as z,G as F,v as Ft,r as Wt,H as Yt,I as Jt}from"../chunks/scheduler.772752a1.js";import{q as Kt,r as Qt,u as Vt,w as Xt,S as et,i as nt,d as U,v as st,a as B,h as gt,t as M,c as bt,b as q,e as w,x as ht,y as mt,g as _,z as Zt,n as k,p as H,A as $t,s as Q,j as wt,k as kt,m as vt,l as yt}from"../chunks/index.311cb7de.js";import{c as te}from"../chunks/index.40b40403.js";function ee(n,t,e,l){if(!t)return x;const c=n.getBoundingClientRect();if(t.left===c.left&&t.right===c.right&&t.top===c.top&&t.bottom===c.bottom)return x;const{delay:i=0,duration:o=300,easing:f=Tt,start:a=Kt()+i,end:s=a+o,tick:r=x,css:u}=e(n,{from:t,to:c},l);let p=!0,d=!1,h;function m(){u&&(h=Vt(n,0,1,o,i,f,u)),i||(d=!0)}function b(){u&&Xt(n,h),p=!1}return Qt(C=>{if(!d&&C>=a&&(d=!0),d&&C>=s&&(r(1,0),b()),!p)return!1;if(d){const y=C-a,L=0+1*f(y/o);r(L,1-L)}return!0}),m(),r(0,1),b}function ne(n){const t=getComputedStyle(n);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:e,height:l}=t,c=n.getBoundingClientRect();n.style.position="absolute",n.style.width=e,n.style.height=l,se(n,c)}}function se(n,t){const e=n.getBoundingClientRect();if(t.left!==e.left||t.top!==e.top){const l=getComputedStyle(n),c=l.transform==="none"?"":l.transform;n.style.transform=`${c} translate(${t.left-e.left}px, ${t.top-e.top}px)`}}function oe(n,t){const e={},l={},c={$$scope:1};let i=n.length;for(;i--;){const o=n[i],f=t[i];if(f){for(const a in o)a in f||(l[a]=1);for(const a in f)c[a]||(e[a]=f[a],c[a]=1);n[i]=f}else for(const a in o)c[a]=1}for(const o in l)o in e||(e[o]=void 0);return e}function ie(n){return typeof n=="object"&&n!==null?n:{}}function _t(n,t){if(isNaN(n)||n<400||n>599)throw new Error(`HTTP error status codes must be between 400 and 599 â€” ${n} is invalid`);return new Nt(n,t)}new TextEncoder;const re=async({params:n})=>{var o,f;const t=Ct(K,"users"),e=xt(t,Bt("username","==",n.username),Ot(1)),l=await Dt(e);if(!((o=l.docs[0])==null?void 0:o.exists()))throw _t(404,"This user does not exists !");const i=(f=l.docs[0])==null?void 0:f.data();if(!i.published)throw _t(403,`The profile of ${i.username} is not public yet !`);return{username:i.username,photoURL:i.photoURL,bio:i.bio,links:i.links??[]}},pe=Object.freeze(Object.defineProperty({__proto__:null,load:re},Symbol.toStringTag,{value:"Module"}));function Lt(n,{from:t,to:e},l={}){const c=getComputedStyle(n),i=c.transform==="none"?"":c.transform,[o,f]=c.transformOrigin.split(" ").map(parseFloat),a=t.left+t.width*o/e.width-(e.left+o),s=t.top+t.height*f/e.height-(e.top+f),{delay:r=0,duration:u=d=>Math.sqrt(d)*120,easing:p=te}=l;return{delay:r,duration:Mt(u)?u(Math.sqrt(a*a+s*s)):u,easing:p,css:(d,h)=>{const m=h*a,b=h*s,C=d+h*t.width/e.width,y=d+h*t.height/e.height;return`transform: ${i} translate(${m}px, ${b}px) scale(${C}, ${y});`}}}const ot="src/lib/components/SortableList.svelte";function I(n,t,e){const l=n.slice();return l[9]=t[e],l[11]=e,l}const ae=n=>({item:n&1,index:n&1}),pt=n=>({item:n[9],index:n[11]});function St(n){let t,e="Nothing here";const l={c:function(){t=P("p"),t.textContent=e,this.h()},l:function(i){t=R(i,"P",{class:!0,["data-svelte-h"]:!0}),At(t)!=="svelte-ribsoe"&&(t.textContent=e),this.h()},h:function(){_(t,"class","text-info text-sm"),j(t,ot,68,1,1644)},m:function(i,o){B(i,t,o)},p:x,i:x,o:x,d:function(i){i&&w(t)}};return U("SvelteRegisterBlock",{block:l,id:St.name,type:"else",source:"(59:0) {:else}",ctx:n}),l}function Et(n){let t,e=[],l=new Map,c,i=ht(n[0]);const o=a=>a[9].id;mt(n,i,I,o);for(let a=0;a<i.length;a+=1){let s=I(n,i,a),r=o(s);l.set(r,e[a]=V(r,s))}const f={c:function(){t=P("ul");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l:function(s){t=R(s,"UL",{class:!0});var r=O(t);for(let u=0;u<e.length;u+=1)e[u].l(r);r.forEach(w),this.h()},h:function(){_(t,"class","list-none"),j(t,ot,49,1,1091)},m:function(s,r){B(s,t,r);for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(t,null);c=!0},p:function(s,r){if(r&63){i=ht(s[0]),gt();for(let u=0;u<e.length;u+=1)e[u].r();mt(s,i,I,o),e=Zt(e,r,o,1,s,i,l,t,$t,V,null,I);for(let u=0;u<e.length;u+=1)e[u].a();bt()}},i:function(s){if(!c){for(let r=0;r<i.length;r+=1)q(e[r]);c=!0}},o:function(s){for(let r=0;r<e.length;r+=1)M(e[r]);c=!1},d:function(s){s&&w(t);for(let r=0;r<e.length;r+=1)e[r].d()}};return U("SvelteRegisterBlock",{block:f,id:Et.name,type:"if",source:"(40:0) {#if list?.length}",ctx:n}),f}function V(n,t){let e,l,c,i,o,f=x,a,s,r;const u=t[6].default,p=qt(u,t,t[5],pt),d={key:n,first:null,c:function(){e=P("li"),p&&p.c(),l=D(),this.h()},l:function(m){e=R(m,"LI",{"data-index":!0,"data-id":!0,draggable:!0,class:!0});var b=O(e);p&&p.l(b),l=N(b),b.forEach(w),this.h()},h:function(){_(e,"data-index",c=t[11]),_(e,"data-id",i=t[9].id),_(e,"draggable","true"),_(e,"class","stack w-full max-w-md my-4 text-center bg-base-300 flex justify-center items-center p-4 rounded-lg not-prose no-underline s-bF1CfGpt5Wxa"),ft(e,"over",t[9].id===t[1]),j(e,ot,51,3,1157),this.first=e},m:function(m,b){B(m,e,b),p&&p.m(e,null),k(e,l),a=!0,s||(r=[H(e,"dragstart",Pt,!1,!1,!1,!1),H(e,"dragover",dt(t[2]),!1,!0,!1,!1),H(e,"dragleave",t[3],!1,!1,!1,!1),H(e,"drop",dt(t[4]),!1,!0,!1,!1)],s=!0)},p:function(m,b){t=m,p&&p.p&&(!a||b&33)&&Ht(p,u,t,t[5],a?Gt(u,t[5],b,ae):It(t[5]),pt),(!a||b&1&&c!==(c=t[11]))&&_(e,"data-index",c),(!a||b&1&&i!==(i=t[9].id))&&_(e,"data-id",i),(!a||b&3)&&ft(e,"over",t[9].id===t[1])},r:function(){o=e.getBoundingClientRect()},f:function(){ne(e),f()},a:function(){f(),f=ee(e,o,Lt,{duration:200})},i:function(m){a||(q(p,m),a=!0)},o:function(m){M(p,m),a=!1},d:function(m){m&&w(e),p&&p.d(m),s=!1,zt(r)}};return U("SvelteRegisterBlock",{block:d,id:V.name,type:"each",source:"(42:2) {#each list as item, index (item.id)}",ctx:t}),d}function X(n){let t,e,l,c;const i=[Et,St],o=[];function f(s,r){var u;return(u=s[0])!=null&&u.length?0:1}t=f(n),e=o[t]=i[t](n);const a={c:function(){e.c(),l=ut()},l:function(r){e.l(r),l=ut()},m:function(r,u){o[t].m(r,u),B(r,l,u),c=!0},p:function(r,[u]){let p=t;t=f(r),t===p?o[t].p(r,u):(gt(),M(o[p],1,1,()=>{o[p]=null}),bt(),e=o[t],e?e.p(r,u):(e=o[t]=i[t](r),e.c()),q(e,1),e.m(l.parentNode,l))},i:function(r){c||(q(e),c=!0)},o:function(r){M(e),c=!1},d:function(r){r&&w(l),o[t].d(r)}};return U("SvelteRegisterBlock",{block:a,id:X.name,type:"component",source:"",ctx:n}),a}function T(n){return n.dataset.index?{...n.dataset}:T(n.parentNode)}function Pt(n){var e;const t=T(n.target);(e=n.dataTransfer)==null||e.setData("source",t==null?void 0:t.index.toString())}function le(n,t,e){let{$$slots:l={},$$scope:c}=t;st("SortableList",l,["default"]);let{list:i}=t,o=!1;async function f(d){var m;(m=d.target.dataset)==null||m.id;const h=T(d.target);e(1,o=(h==null?void 0:h.id)??!1)}async function a(d){const h=T(d.target);h==null||h.id}async function s(d){var m;e(1,o=!1);const h=T(d.target);u({from:(m=d.dataTransfer)==null?void 0:m.getData("source"),to:h.index})}const r=ct(),u=({from:d,to:h})=>{const m=[...i];m[d]=[m[h],m[h]=m[d]][0],r("sort",m)};n.$$.on_mount.push(function(){i===void 0&&!("list"in t||n.$$.bound[n.$$.props.list])&&console.warn("<SortableList> was created without expected prop 'list'")});const p=["list"];return Object.keys(t).forEach(d=>{!~p.indexOf(d)&&d.slice(0,2)!=="$$"&&d!=="slot"&&console.warn(`<SortableList> was created with unknown prop '${d}'`)}),n.$$set=d=>{"list"in d&&e(0,i=d.list),"$$scope"in d&&e(5,c=d.$$scope)},n.$capture_state=()=>({flip:Lt,createEventDispatcher:ct,list:i,isOver:o,getDraggedParent:T,onDragStart:Pt,onDragOver:f,onDragLeave:a,onDrop:s,dispatch:r,reorder:u}),n.$inject_state=d=>{"list"in d&&e(0,i=d.list),"isOver"in d&&e(1,o=d.isOver)},t&&"$$inject"in t&&n.$inject_state(t.$$inject),[i,o,f,a,s,c,l]}class Rt extends et{constructor(t){super(t),nt(this,t,le,X,tt,{list:0}),U("SvelteRegisterComponent",{component:this,tagName:"SortableList",options:t,id:X.name})}get list(){throw new Error("<SortableList>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set list(t){throw new Error("<SortableList>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const J="src/lib/components/UserLink.svelte";function Z(n){let t,e,l,c,i,o;const f={c:function(){t=P("a"),e=P("img"),c=D(),i=P("span"),o=G(n[2]),this.h()},l:function(s){t=R(s,"A",{href:!0,class:!0});var r=O(t);e=R(r,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),c=N(r),i=R(r,"SPAN",{class:!0});var u=O(i);o=z(u,n[2]),u.forEach(w),r.forEach(w),this.h()},h:function(){F(e.src,l=`/${n[0]}.png`)||_(e,"src",l),_(e,"alt",n[0]),_(e,"width","32"),_(e,"height","32"),_(e,"class","w-8"),j(e,J,10,1,253),_(i,"class","text-lg text-white font-bold"),j(i,J,11,1,329),_(t,"href",n[1]),_(t,"class","stack w-full max-w-md text-center bg-base-300 flex justify-center items-center p-4 rounded-lg not-prose no-underline"),j(t,J,6,0,109)},m:function(s,r){B(s,t,r),k(t,e),k(t,c),k(t,i),k(i,o)},p:function(s,[r]){r&1&&!F(e.src,l=`/${s[0]}.png`)&&_(e,"src",l),r&1&&_(e,"alt",s[0]),r&4&&Q(o,s[2]),r&2&&_(t,"href",s[1])},i:x,o:x,d:function(s){s&&w(t)}};return U("SvelteRegisterBlock",{block:f,id:Z.name,type:"component",source:"",ctx:n}),f}function ce(n,t,e){let{$$slots:l={},$$scope:c}=t;st("UserLink",l,[]);let{icon:i="default"}=t,{url:o="foo"}=t,{title:f="Your title"}=t;const a=["icon","url","title"];return Object.keys(t).forEach(s=>{!~a.indexOf(s)&&s.slice(0,2)!=="$$"&&s!=="slot"&&console.warn(`<UserLink> was created with unknown prop '${s}'`)}),n.$$set=s=>{"icon"in s&&e(0,i=s.icon),"url"in s&&e(1,o=s.url),"title"in s&&e(2,f=s.title)},n.$capture_state=()=>({icon:i,url:o,title:f}),n.$inject_state=s=>{"icon"in s&&e(0,i=s.icon),"url"in s&&e(1,o=s.url),"title"in s&&e(2,f=s.title)},t&&"$$inject"in t&&n.$inject_state(t.$$inject),[i,o,f]}class jt extends et{constructor(t){super(t),nt(this,t,ce,Z,tt,{icon:0,url:1,title:2}),U("SvelteRegisterComponent",{component:this,tagName:"UserLink",options:t,id:Z.name})}get icon(){throw new Error("<UserLink>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set icon(t){throw new Error("<UserLink>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get url(){throw new Error("<UserLink>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set url(t){throw new Error("<UserLink>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get title(){throw new Error("<UserLink>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set title(t){throw new Error("<UserLink>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const A="src/routes/[username]/+page.svelte";function Ut(n){let t,e;const l=[n[3]];let c={};for(let o=0;o<l.length;o+=1)c=Yt(c,l[o]);t=new jt({props:c,$$inline:!0});const i={c:function(){wt(t.$$.fragment)},l:function(f){kt(t.$$.fragment,f)},m:function(f,a){vt(t,f,a),e=!0},p:function(f,a){const s=a&8?oe(l,[ie(f[3])]):{};t.$set(s)},i:function(f){e||(q(t.$$.fragment,f),e=!0)},o:function(f){M(t.$$.fragment,f),e=!1},d:function(f){yt(t,f)}};return U("SvelteRegisterBlock",{block:i,id:Ut.name,type:"slot",source:"(27:1) <SortableList list={data.links} let:item let:index on:sort={sortList}>",ctx:n}),i}function $(n){let t,e,l,c,i,o,f,a=n[0].username+"",s,r,u,p,d,h,m=(n[0].bio??"no bio yet...")+"",b,C,y,L;document.title=t="@"+n[0].username+" Links",y=new Rt({props:{list:n[0].links,$$slots:{default:[Ut,({item:E,index:g})=>({3:E,4:g}),({item:E,index:g})=>(E?8:0)|(g?16:0)]},$$scope:{ctx:n}},$$inline:!0}),y.$on("sort",n[1]);const it={c:function(){e=P("meta"),c=D(),i=P("main"),o=P("h1"),f=G("@"),s=G(a),r=D(),u=P("img"),d=D(),h=P("p"),b=G(m),C=D(),wt(y.$$.fragment),this.h()},l:function(g){const v=Jt("svelte-ia5kau",document.head);e=R(v,"META",{name:!0,content:!0}),v.forEach(w),c=N(g),i=R(g,"MAIN",{class:!0});var S=O(i);o=R(S,"H1",{class:!0});var W=O(o);f=z(W,"@"),s=z(W,a),W.forEach(w),r=N(S),u=R(S,"IMG",{src:!0,alt:!0,width:!0,class:!0}),d=N(S),h=R(S,"P",{class:!0});var rt=O(h);b=z(rt,m),rt.forEach(w),C=N(S),kt(y.$$.fragment,S),S.forEach(w),this.h()},h:function(){_(e,"name","description"),_(e,"content",l=n[0].bio),j(e,A,19,1,492),_(o,"class","text-7xl text-purple-500"),j(o,A,23,1,602),F(u.src,p=n[0].photoURL??"/user.png")||_(u,"src",p),_(u,"alt","photoURL"),_(u,"width","256"),_(u,"class","mx-auto"),j(u,A,27,1,668),_(h,"class","text-xl my-8"),j(h,A,29,1,756),_(i,"class","prose text-center mx-auto mt-8"),j(i,A,22,0,555)},m:function(g,v){k(document.head,e),B(g,c,v),B(g,i,v),k(i,o),k(o,f),k(o,s),k(i,r),k(i,u),k(i,d),k(i,h),k(h,b),k(i,C),vt(y,i,null),L=!0},p:function(g,[v]){(!L||v&1)&&t!==(t="@"+g[0].username+" Links")&&(document.title=t),(!L||v&1&&l!==(l=g[0].bio))&&_(e,"content",l),(!L||v&1)&&a!==(a=g[0].username+"")&&Q(s,a),(!L||v&1&&!F(u.src,p=g[0].photoURL??"/user.png"))&&_(u,"src",p),(!L||v&1)&&m!==(m=(g[0].bio??"no bio yet...")+"")&&Q(b,m);const S={};v&1&&(S.list=g[0].links),v&40&&(S.$$scope={dirty:v,ctx:g}),y.$set(S)},i:function(g){L||(q(y.$$.fragment,g),L=!0)},o:function(g){M(y.$$.fragment,g),L=!1},d:function(g){g&&(w(c),w(i)),w(e),yt(y)}};return U("SvelteRegisterBlock",{block:it,id:$.name,type:"component",source:"",ctx:n}),it}function ue(n,t,e){let l;Ft(Y,"user"),Wt(n,Y,s=>e(2,l=s));let{$$slots:c={},$$scope:i}=t;st("Page",c,[]);let{data:o}=t;function f(s){const r=s.detail,u=at(K,"users",l.uid);lt(u,{links:r},{merge:!0}),e(0,o.links=r,o)}n.$$.on_mount.push(function(){o===void 0&&!("data"in t||n.$$.bound[n.$$.props.data])&&console.warn("<Page> was created without expected prop 'data'")});const a=["data"];return Object.keys(t).forEach(s=>{!~a.indexOf(s)&&s.slice(0,2)!=="$$"&&s!=="slot"&&console.warn(`<Page> was created with unknown prop '${s}'`)}),n.$$set=s=>{"data"in s&&e(0,o=s.data)},n.$capture_state=()=>({SortableList:Rt,UserLink:jt,doc:at,setDoc:lt,db:K,user:Y,data:o,sortList:f,$user:l}),n.$inject_state=s=>{"data"in s&&e(0,o=s.data)},t&&"$$inject"in t&&n.$inject_state(t.$$inject),[o,f]}class ge extends et{constructor(t){super(t),nt(this,t,ue,$,tt,{data:0}),U("SvelteRegisterComponent",{component:this,tagName:"Page",options:t,id:$.name})}get data(){throw new Error("<Page>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set data(t){throw new Error("<Page>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{ge as component,pe as universal};

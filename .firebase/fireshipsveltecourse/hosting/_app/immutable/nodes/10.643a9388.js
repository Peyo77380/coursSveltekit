import{s as ae,v as J,r as K,g as _,c as L,h as v,z as O,d as k,i as P,k as b,G as Q,E as le,w as G,F as oe}from"../chunks/scheduler.772752a1.js";import{S as ne,i as ie,d as I,v as re,e as U,g as d,a as B,n as g,p as V}from"../chunks/index.311cb7de.js";import{g as W}from"../chunks/navigation.5b99e015.js";import{f as X,i as Y,u as T,c as q,g as Z,h as $,j as ee,r as te,l as se}from"../chunks/firebase.68c14ee1.js";const w="src/routes/login/photo/+page.svelte";function z(o){let e,t,f="Uploading ...",s,r;const c={c:function(){e=_("div"),t=_("p"),t.textContent=f,s=L(),r=_("progress"),this.h()},l:function(n){e=v(n,"DIV",{});var l=P(e);t=v(l,"P",{["data-svelte-h"]:!0}),O(t)!=="svelte-g9yozx"&&(t.textContent=f),s=k(l),r=v(l,"PROGRESS",{class:!0}),P(r).forEach(U),l.forEach(U),this.h()},h:function(){b(t,w,56,3,1351),d(r,"class","progress progress-info w-56 mt-6"),b(r,w,57,3,1375),b(e,w,55,2,1342)},m:function(n,l){B(n,e,l),g(e,t),g(e,s),g(e,r)},d:function(n){n&&U(e)}};return I("SvelteRegisterBlock",{block:c,id:z.name,type:"if",source:"(46:1) {#if uploading}",ctx:o}),c}function A(o){let e,t,f="Next !",s,r;const c={c:function(){e=_("div"),t=_("button"),t.textContent=f,this.h()},l:function(n){e=v(n,"DIV",{class:!0});var l=P(e);t=v(l,"BUTTON",{class:!0,["data-svelte-h"]:!0}),O(t)!=="svelte-tghp1a"&&(t.textContent=f),l.forEach(U),this.h()},h:function(){d(t,"class","btn btn-success w-64"),b(t,w,63,3,1486),d(e,"class","py-8"),b(e,w,62,2,1464)},m:function(n,l){B(n,e,l),g(e,t),s||(r=V(t,"click",o[5],!1,!1,!1,!1),s=!0)},p:G,d:function(n){n&&U(e),s=!1,r()}};return I("SvelteRegisterBlock",{block:c,id:A.name,type:"if",source:"(53:1) {#if uploaded}",ctx:o}),c}function F(o){let e,t="Upload your nicest smile !",f,s,r,c,u,n,l,R,j="Pick a file",x,a,y,C,E,N,h=o[1]&&z(o),m=o[2]&&A(o);const M={c:function(){e=_("h2"),e.textContent=t,f=L(),s=_("form"),r=_("div"),c=_("img"),n=L(),l=_("label"),R=_("span"),R.textContent=j,x=L(),a=_("input"),y=L(),h&&h.c(),C=L(),m&&m.c(),this.h()},l:function(i){e=v(i,"H2",{["data-svelte-h"]:!0}),O(e)!=="svelte-omljqb"&&(e.textContent=t),f=k(i),s=v(i,"FORM",{class:!0});var p=P(s);r=v(p,"DIV",{class:!0});var S=P(r);c=v(S,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),S.forEach(U),n=k(p),l=v(p,"LABEL",{class:!0,for:!0});var H=P(l);R=v(H,"SPAN",{class:!0,["data-svelte-h"]:!0}),O(R)!=="svelte-1xba4c3"&&(R.textContent=j),H.forEach(U),x=k(p),a=v(p,"INPUT",{type:!0,id:!0,class:!0,accept:!0}),y=k(p),h&&h.l(p),C=k(p),m&&m.l(p),p.forEach(U),this.h()},h:function(){var i;b(e,w,31,0,803),Q(c.src,u=o[0]??((i=o[3])==null?void 0:i.photoURL))||d(c,"src",u),d(c,"alt","Profile Picture"),d(c,"width","256"),d(c,"height","256"),d(c,"class","mx-auto"),b(c,w,35,2,925),d(r,"class","w-3/4 mx-auto"),b(r,w,34,1,895),d(R,"class","label-text"),b(R,w,44,2,1101),d(l,"class","label"),d(l,"for","photoURL"),b(l,w,43,1,1062),d(a,"type","file"),d(a,"id","photoURL"),d(a,"class","file-input w-full max-w-xs"),d(a,"accept","image/png, image/jpeg, image/jpg, image/gif, image/webp"),b(a,w,46,1,1156),d(s,"class","px-8"),b(s,w,33,0,840)},m:function(i,p){B(i,e,p),B(i,f,p),B(i,s,p),g(s,r),g(r,c),g(s,n),g(s,l),g(l,R),g(s,x),g(s,a),g(s,y),h&&h.m(s,null),g(s,C),m&&m.m(s,null),E||(N=[V(a,"change",o[4],!1,!1,!1,!1),V(s,"submit",le(o[4]),!1,!0,!1,!1)],E=!0)},p:function(i,[p]){var S;p&9&&!Q(c.src,u=i[0]??((S=i[3])==null?void 0:S.photoURL))&&d(c,"src",u),i[1]?h||(h=z(i),h.c(),h.m(s,C)):h&&(h.d(1),h=null),i[2]?m?m.p(i,p):(m=A(i),m.c(),m.m(s,null)):m&&(m.d(1),m=null)},i:G,o:G,d:function(i){i&&(U(e),U(f),U(s)),h&&h.d(),m&&m.d(),E=!1,oe(N)}};return I("SvelteRegisterBlock",{block:M,id:F.name,type:"component",source:"",ctx:o}),M}function ce(o,e,t){let f,s;J(T,"user"),K(o,T,a=>t(6,f=a)),J(q,"userData"),K(o,q,a=>t(3,s=a));let{$$slots:r={},$$scope:c}=e;re("Page",r,[]);let u,n=!1,l=(f==null?void 0:f.photoURL)||!1;async function R(a){t(1,n=!0),t(2,l=!1);const y=a.target.files[0];t(0,u=URL.createObjectURL(y));const C=te(Y,`users/${f.uid}/profile.png`),E=await se(C,y),N=await ee(E.ref);await $(Z(X,"users",f.uid),{photoURL:N}),t(1,n=!1),t(2,l=!0)}const j=()=>W("/login/done"),x=[];return Object.keys(e).forEach(a=>{!~x.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&console.warn(`<Page> was created with unknown prop '${a}'`)}),o.$capture_state=()=>({goto:W,db:X,storage:Y,user:T,userData:q,doc:Z,updateDoc:$,getDownloadURL:ee,ref:te,uploadBytes:se,previewURL:u,uploading:n,uploaded:l,upload:R,goToNextPage:j,$user:f,$userData:s}),o.$inject_state=a=>{"previewURL"in a&&t(0,u=a.previewURL),"uploading"in a&&t(1,n=a.uploading),"uploaded"in a&&t(2,l=a.uploaded)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),[u,n,l,s,R,j]}class me extends ne{constructor(e){super(e),ie(this,e,ce,F,ae,{}),I("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:F.name})}}export{me as component};
